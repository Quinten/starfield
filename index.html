<!doctype html>
<head>
    <meta charset="utf-8" />
    <title>Starfield</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: #000;
        }
    </style>
</head>
<body>
<canvas />
<script>

// distilled and restyled from http://www.kevs3d.co.uk/dev/warpfield/index-original.html

var ngn = {};
ngn.setup = function () {

    if (!window.innerWidth) {
        setTimeout(ngn.setup, 500);
        return;
    }

    var w = window.innerWidth;
    var h = window.innerHeight;
    var cw = w/2;
    var ch = h/2;

    var cnvs = document.body.children[0];
    cnvs.width = w;
    cnvs.height = h;

    var ctx = cnvs.getContext("2d");
    ctx.fillStyle = "#000";
    ctx.strokeStyle = "#fff";
    ctx.globalAlpha = 0.3;

    l=Math,m=l.random,n=l.sin,o=l.floor,p=10,q=[],r=0,s=0.185,V=500;
    function u(a){
      a.x=(m()*w-w*0.5)*p;
      a.y=(m()*h-h*0.5)*p;
      a.a=p;a.b=0;a.c=0
    }
    for(var i=0,star;i<V;i++){
        star={};
        u(star);
        q.push(star);
    }
    setInterval(function(){ 
        ctx.fillRect(0, 0, w, h);
        for(i = 0; i < V; i++){
            b=q[i],x=b.x/b.a,y=b.y/b.a;
            if(b.b!=0){
                ctx.beginPath();
                ctx.moveTo((x + cw) , (y + ch));
                ctx.lineTo((b.b + cw), (b.c + ch));
                ctx.stroke()
            }
            b.b=x;b.c=y;b.a-=s;
            if(b.a<s||b.b>w||b.c>h){
                u(b);
            }
        }
        r+=0.1;
    }, 25);
}

if (document.readyState === 'complete') {
    ngn.setup();
} else {
    window.onload = function () {
        ngn.setup();
    };
}

</script>
</body>

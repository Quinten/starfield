<!doctype html>
<head>
    <meta charset="utf-8" />
    <title>Starfield</title>
</head>
<body>
<canvas />
<script>

// distilled and restyled from http://www.kevs3d.co.uk/dev/warpfield/index-original.html

var ngn = {};
ngn.setup = function () {

    if (!window.innerWidth) {
        setTimeout(ngn.setup, 500);
        return;
    }

    document.body.style.margin = 0;
    document.body.style.overflow = "hidden";
    var w = window.innerWidth;
    e = window.innerHeight;
    var cnvs = document.body.children[0];
    i = w/2;
    j = e/2;
    cnvs.width = w;
    cnvs.height = e;
    var ctx = cnvs.getContext("2d");
    ctx.fillStyle = "#000";
    ctx.strokeStyle = "#fff";
    ctx.globalAlpha = 0.3;

    l=Math,m=l.random,n=l.sin,o=l.floor,p=10,q=[],r=0,s=0.185,V=500;
    function u(a){
      a.x=(m()*w-w*0.5)*p;
      a.y=(m()*e-e*0.5)*p;
      a.a=p;a.b=0;a.c=0
    }
    for(var v=0,star;v<V;v++){
        star={};
        u(star);
        q.push(star);
    }
    setInterval(function(){ 
        ctx.fillRect(0,0,w,e);
        for(a=i-w/2+w/2,f=j-e/2+e/2,h=0;h<V;h++){
            b=q[h],x=b.x/b.a,y=b.y/b.a;
            if(b.b!=0){
                ctx.beginPath();
                ctx.moveTo(x+a,y+f);
                ctx.lineTo(b.b+a,b.c+f);
                ctx.stroke()
            }
            b.b=x;b.c=y;b.a-=s;
            if(b.a<s||b.b>w||b.c>e){
                u(b);
            }
        }
        r+=0.1;
    }, 25);
}

if (document.readyState === 'complete') {
    ngn.setup();
} else {
    window.onload = function () {
        ngn.setup();
    };
}

</script>
</body>
